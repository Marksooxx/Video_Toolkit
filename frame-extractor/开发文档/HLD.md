### 高级设计文档 (HLD) - 视频帧截取工具

#### 1. 系统架构图

这是一个简单的命令行工具，其架构图如下：

```
[用户] <--> [Python主脚本] <--> [ffmpeg-python库] <--> [FFmpeg可执行程序] <--> [视频文件系统]
```

*   **用户 (User):** 通过命令行与脚本进行交互，提供输入信息。
*   **Python主脚本 (Main Script):** 应用程序的入口，负责协调各个模块完成任务。
*   **ffmpeg-python库 (Library):** 一个Python封装库，用于以编程方式构建和执行FFmpeg命令。
*   **FFmpeg可执行程序 (Executable):** 在操作系统上实际执行视频处理的后台程序。
*   **视频文件系统 (File System):** 脚本从中读取源视频并向其写入目标视频。

#### 2. 模块划分

为了实现清晰的逻辑分离，脚本将包含以下几个核心功能模块：

*   **主控模块 (`main`):**
    *   功能：作为程序的入口点，按顺序调用其他模块，驱动整个流程。
*   **用户交互模块 (`ui`):**
    *   功能：负责向用户显示提示信息，并获取用户输入的视频文件路径和帧范围字符串。
*   **参数解析模块 (`parser`):**
    *   功能：负责解析用户输入的帧范围字符串（如 `10f-20f`），验证其格式，并将其转换为FFmpeg可以理解的参数。
*   **视频处理模块 (`processor`):**
    *   功能：使用 `ffmpeg-python` 库构建FFmpeg命令，执行视频的截取和流复制操作。

#### 3. 建议的技术栈

*   **编程语言:** Python 3.11+
*   **核心库:** `ffmpeg-python`
*   **外部依赖:** FFmpeg (需要预先安装在操作系统中，并将其路径添加到系统环境变量 `PATH` 中)。

#### 4. 高层级的数据流

1.  **启动:** 用户运行Python脚本。
2.  **输入:** `用户交互模块` 提示并获取 `视频文件路径` (字符串) 和 `帧范围` (字符串)。
3.  **解析:** `参数解析模块` 接收 `帧范围` 字符串，校验并解析出 `开始帧` 和 `结束帧`。如果格式无效，则向用户报错。
4.  **构建:** `主控模块` 根据 `视频文件路径` 和 `帧范围` 字符串，生成 `输出文件路径`。
5.  **处理:** `视频处理模块` 接收 `输入路径`、`输出路径`、`开始帧` 和 `结束帧`，调用 `ffmpeg-python` 构建一个带有流复制 (`-c copy`) 和时间/帧截取参数的命令。
6.  **执行:** `ffmpeg-python` 库执行构建好的FFmpeg命令。
7.  **完成:** FFmpeg进程完成视频文件的读写操作。脚本向用户显示成功或失败的消息。

